



Network Working Group                                      10 March 2023
Internet-Draft                                                          
Intended status: Standards Track                                        
Expires: 11 September 2023


        A YANG Data Model for Network Resource Partitions (NRPs)
                       draft-xx-teas-nrp-yang-00

Abstract

   This document defines a YANG data model for Network Resource
   Partitions (NRPs).  The model can be used, in particular, for the
   realization of the IETF Network Slice Services.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 11 September 2023.

Copyright Notice

   Copyright (c) 2023 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Revised BSD License text as
   described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Revised BSD License.






                        Expires 11 September 2023               [Page 1]

Internet-Draft                  NRP YANG                      March 2023


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   3
   3.  NRP Data Model  . . . . . . . . . . . . . . . . . . . . . . .   3
     3.1.  NRP Instantiation . . . . . . . . . . . . . . . . . . . .   4
       3.1.1.  Resource Reservation  . . . . . . . . . . . . . . . .   5
       3.1.2.  NRP Selector  . . . . . . . . . . . . . . . . . . . .   5
       3.1.3.  NRP Topology  . . . . . . . . . . . . . . . . . . . .   6
     3.2.  NRP monitoring  . . . . . . . . . . . . . . . . . . . . .   7
     3.3.  NRP Device Model Description  . . . . . . . . . . . . . .   8
   4.  NRP Yang Module . . . . . . . . . . . . . . . . . . . . . . .   8
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .  25
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  25
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  26
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .  26
     7.2.  Informative References  . . . . . . . . . . . . . . . . .  27
   Appendix A.  An Example . . . . . . . . . . . . . . . . . . . . .  28
   Appendix B.  NRP YANG Module Tree . . . . . . . . . . . . . . . .  29
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .  32

1.  Introduction

   [I-D.ietf-teas-ietf-network-slices] defines a framework for IETF
   Network Slice Services, which provide connectivity coupled with
   network resources commitment between a number of Service Demarcation
   Points (SDPs) over a shared network infrastructure.  The IETF Network
   Slice service is expressed in terms of one or more connectivity
   constructs, which can be of a connection type (point-to-point (P2P),
   point-to-multipoint (P2MP), or any-to-any (A2A)) and any combination
   of these types.

   This draft defines a YANG module of NRPs for mapping one or more
   connection constructs of one or more IETF network slices, for
   ensuring SLO and SLE and network scalability.  An IETF Network Slice
   Controller (NSC) can use it to manage NRP instances in order to
   implement Network Slice Services.

   An NRP Policy [I-D.ietf-teas-ns-ip-mpls] is a policy construct that
   enables instantiation of mechanisms in support of service specific
   control and data plane behaviors on select topological elements
   associated with the NRP.Section 3.1 describes the detailed definition
   of NRP policy in NRP instantiation.

   According to the YANG model classification of [RFC8309], the NRP
   model is a network configuration model.





                        Expires 11 September 2023               [Page 2]

Internet-Draft                  NRP YANG                      March 2023


2.  Terminology

   The following terms are defined in [RFC6241] and are used in this
   specification:

   *  configuration data

   *  state data

   The following terms are defined in [RFC7950] and are used in this
   specification:

   *  augment

   *  data model

   *  data node

   The terminology for describing YANG data models is found in
   [RFC7950].

   The tree diagram used in this document follows the notation defined
   in [RFC8340].

3.  NRP Data Model

   There are multiple modes of NRP operations to be supported as
   follows:

   *  NRP instantiation: Depending on the slice service types and also
      network status, there can be two types of approaches.  One method
      is to create an NRP instance before the network controller
      processes the IETF Network Slice service request.  Another one is
      that the network controller may start creating an NRP instance
      while configuring the IETF Network Slice service request.

   *  NRP modification: When the capacity of an existing NPR link is
      close to capacity, the bandwidth of the link could be increased.
      And when the NRP link or node resources are insufficient, new NRP
      links and nodes could be added.

   *  NRP Deletion: If the NSC determines that no slice service is using
      an NRP, the NSC can delete the NRP instance.

   *  NRP Monitoring: The NSC can use the NRP model to track and monitor
      NRP resource status and usage.





                        Expires 11 September 2023               [Page 3]

Internet-Draft                  NRP YANG                      March 2023


3.1.  NRP Instantiation

   An NRP policy specifies the rules for determining the topology
   associated with the NRP and dictates how an NRP can be realized in
   IP/MPLS networks using one of three partition modes.  The NRP policy
   dictates if the partitioning of the shared network resources can be
   achieved in (a) just the data plane or in (b) just the control plane
   or in (c) both the control and data planes.

   The NRP policy modes (a) and (c) require the forwarding engine on
   each NRP capable node to identify the traffic belonging to a specific
   NRP and to apply the corresponding Per-Hop Behavior (PHB) or
   forwarding mechanism that determines the forwarding treatment of the
   packets belonging to the NRP.  When catering to IETF Network Slices,
   this NRP identification is referred to as the NRP selector and may
   comprises of traffic streams from one or more connectivity constructs
   (belonging to one or more IETF network slices) mapped to a specific
   NRP.  The NRP policy modes (b) and (c) require the distributed/
   centralized resource reservation management.

   “nrp-policy” is defined to enable NRP Stateful Traffic Engineering
   (NRP-TE) [I-D.ietf-teas-ns-ip-mpls] and/or NRP IGP forwarding in IP/
   MPLS networks.

   The tree diagram used in this document follows the notation defined
   in [RFC8340].

   The high-level model structure defined by this document is as shown
   below:

   module: ietf-nrp
     augment /nw:networks:
       +--rw nrp-policies
          +--rw nrp-policy* [name]
             +--rw name                    string
             +--rw nrp-id?                 uint32
             +--rw mode?         identityref
             +--rw resource-reservation
             |     ...
             +--rw nrp-selector
             |     ...
             +--rw qos-phb-profile-name?   string
             +--rw nrp-topology
                   ...

   The 'networks' container from the 'ietf-network' module [RFC8345]
   provides a placeholder for an inventory of nodes in the network.
   This container is augmented to carry a set of NRP policies.



                        Expires 11 September 2023               [Page 4]

Internet-Draft                  NRP YANG                      March 2023


   The description of the NRP data nodes are as follows:

   *  "nrp-id": Is an identifier that is used to uniquely identify an
      NRP instance within the NSC network scope.

   *  "mode": Refers to control plane resource partition, data plane
      resource partition, or a combination of two types.

3.1.1.  Resource Reservation

   NRP resources reservationThe nodes and links represent the network
   resource allocated for an NRP instance.  'bandwidth-reservation'
   specifies the bandwidth allocated to an NRP instance, or is
   overridden by the configuration of the link of "nrp-topology".

   +--rw resource-reservation
     +--rw preference?                        uint16
     +--rw (max-bw-type)?
        +--:(bw-value)
        |  +--rw maximum-bandwidth?           uint64
        +--:(bw-percentage)
           +--rw maximum-bandwidth-percent?   rt-types:percentage

3.1.2.  NRP Selector

   NRP selector defines the data plane encapsulation types and values
   that are used to identify NRP-specific network resources.  The data
   plane mechanism could be based on IP, MPLS, or SRv6 forwarding.

   +--rw nrp-selector
      +--rw (nrp-selector-type)?
      |  +--:(ipv4-nrp-aware)
      |  |  +--rw nrp-aware-destination-prefix*   inet:ipv4-prefix
      |  +--:(ipv6)
      |  |  +--rw (ipv6-selector-type)?
      |  |     +--:(global-selector)
      |  |     |  +--rw ipv6-hbh-eh?              uint32
      |  |     +--:(nrp-aware)
      |  |        +--rw destination-prefix*       inet:ipv6-prefix
      |  |        +--rw srv6-sid*                 inet:ipv6-prefix
      |  +--:(mpls)
      |     +--rw (mpls-selector-type)?
      |        +--:(global-selector)
      |        +--:(nrp-aware)
      +--rw acl-ref*                              nrp-acl-ref






                        Expires 11 September 2023               [Page 5]

Internet-Draft                  NRP YANG                      March 2023


3.1.3.  NRP Topology

   "nrp-topology" defines a dedicated NRP topology.

   When an NRP support IGP forwarding, the topology of NRP must be
   congruent with an IGP instance.The topology used for IGP route
   computation and forwarding can be derived using Multi-Topology
   Routing (MTR) or Flex-algo.  Multi-Topology Routing (MTR) is defined
   in [RFC4915], [RFC5120], and [I-D.ietf-lsr-isis-sr-vtn-mt] or Flex-
   algo is defined in [I-D.ietf-lsr-flex-algo].

   The "selection" container consists of a list of select subset of
   links of an underlay topology or a pre-built topology.

   The 'filter' container consists of a list of filters where each entry
   references a topology filter [I-D.bestbar-teas-yang-topology-filter].
   The topological elements that satisfy the membership criteria can
   optionally override the default resource-reservation and nrp-selector
   specific leafs.
































                        Expires 11 September 2023               [Page 6]

Internet-Draft                  NRP YANG                      March 2023


   +--rw nrp-topology
     +--rw nrp-igp-congruent!
     |  +--rw multi-topology-id?   uint32
     |  +--rw algo-id?             uint32
     |  +--rw sharing?             boolean
     +--rw (topology-type)?
        +--:(selection)
        |  +--rw nrp-select-topology
        |     +--rw nrp-topology-group* [group-id]
        |        +--rw group-id                string
        |        +--rw base-topology-ref
                 |      ...
        |        +--rw links* [link-ref]
        |        |     ...
        |        +--rw resource-reservation
        |        |  +--rw preference?                        uint16
        |        |     ...
        |        +--rw link-partition-type?    identityref
        +--:(filter)
           +--rw filters
              +--rw filter* [filter-ref]
                 +--rw filter-ref              nrp-topo-filter-ref
                 +--rw resource-reservation
                 |  +--rw preference?                        uint16
                 |        ...
                 +--rw nrp-selector
                 |  +--rw (nrp-selector-type)?
                 |       ...
                 +--rw qos-phb-profile-name?   string

3.2.  NRP monitoring

   The NRP model can be used to track and monitor NRP operational status
   and resource usage.

















                        Expires 11 September 2023               [Page 7]

Internet-Draft                  NRP YANG                      March 2023


     augment /nw:networks/nw:network/nw:network-types:
       +--rw nrp!
     augment /nw:networks/nw:network/nw:node:
       +--ro nrp
          +--ro nrp-aware-dp-id
                ...
     augment /nw:networks/nw:network/nt:link:
       +--ro nrp
          +--ro link-partition-type?   identityref
          +--ro bandwidth-value?       uint64
          +--ro nrp-aware-dp-id
          |     ...
          +--ro statistics
                ...
     augment /nw:networks/nw:network/nw:node:
       +--ro nrps* [nrp-id]
          +--ro nrp-id    uint32
          +--ro nrp
                ...
     augment /nw:networks/nw:network/nt:link:
       +--ro nrps* [nrp-id]
          +--ro nrp-id                 uint32
          +--ro link-partition-type?   identityref
          +--ro bandwidth-value?       uint64
          +--ro nrp-aware-dp-id
                ...


3.3.  NRP Device Model Description


4.  NRP Yang Module

   <CODE BEGINS> file "ietf-nrp@2023-03-09.yang"<CODE ENDS>

module ietf-nrp {
  yang-version 1.1;
  namespace "urn:ietf:params:xml:ns:yang:ietf-nrp";
  prefix nrp;

  import ietf-network {
    prefix nw;
    reference
      "RFC 8345: A YANG Data Model for Network Topologies";
  }
  import ietf-network-topology {
    prefix nt;
    reference



                        Expires 11 September 2023               [Page 8]

Internet-Draft                  NRP YANG                      March 2023


      "RFC 8345: A YANG Data Model for Network Topologies";
  }
  import ietf-routing-types {
    prefix rt-types;
    reference
      "RFC 8294: Common YANG Data Types for the Routing Area";
  }
  import ietf-te-types {
    prefix te-types;
    reference
      "RFC 8776: Traffic Engineering Common YANG Types";
  }
  import ietf-te-packet-types {
    prefix te-packet-types;
    reference
      "RFC 8776: Traffic Engineering Common YANG Types";
  }
  import ietf-srv6-types {
    prefix srv6-types;
  }
  import ietf-inet-types {
    prefix inet;
    reference
      "RFC 6991: Common YANG Data Types";
  }
  import ietf-access-control-list {
    prefix acl;
    reference
      "RFC 8519: YANG Data Model for Network Access Control Lists
       (ACLs)";
  }
  import ietf-topology-filter {
    prefix topo-filt;
    reference
      "draft-bestbar-teas-yang-topology-filter: YANG Data Model
       for Topology Filter";
  }

  organization
    "IETF TEAS Working Group";
  contact
    "
     WG Web: <http://tools.ietf.org/wg/teas/>
     WG List:<mailto:teas@ietf.org>


     Editor:




                        Expires 11 September 2023               [Page 9]

Internet-Draft                  NRP YANG                      March 2023


    ";
  description
    "This YANG module defines a network data module for
     NRP(Network Resource Partition).

     Copyright (c) 2023 IETF Trust and the persons identified as
     authors of the code.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject
     to the license terms contained in, the Revised BSD License
     set forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
        (https://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC XXXX
     (https://www.rfc-editor.org/info/rfcXXXX); see the RFC itself
     for full legal notices.";

  revision 2023-03-09 {
    description
      "This is the initial version of NRP YANG model.";
    reference
      "RFC XXX: A YANG Data Model for Network Resource Partition";
  }

  identity nrp-partition-mode {
    description
      "Base identity for nrp partition type.";
  }

  identity nrp-control-plane-partition {
    base nrp-partition-mode;
    description
      "Identity for control plane partition.";
  }

  identity nrp-data-plane-partition {
    base nrp-partition-mode;
    description
      "Identity for data plane partition.";
  }

  identity nrp-hybrid-plane-partition {
    base nrp-partition-mode;
    description
      "Identity for both planes partition.";
  }



                        Expires 11 September 2023              [Page 10]

Internet-Draft                  NRP YANG                      March 2023


  identity nrp-link-partition-type {
    description
      "Base identity for interface partition type.";
  }

  identity virtual-sub-interface-partition {
    base nrp-link-partition-type;
    description
      "Identity for virtual interface or sub-interface, e.g. FlexE.";
  }

  identity queue-partition {
    base nrp-link-partition-type;
    description
      "Identity for queue partition type.";
  }

  identity nrp-dataplane-type {
    description
      "Base identity for NRP data plane type.";
  }

  identity nrp-dataplane-ipv6 {
    base nrp-dataplane-type;
    description
      "Identity for NRP specific packet forwarding of IPv6.";
  }

  identity nrp-dataplane-mpls {
    base nrp-dataplane-type;
    description
      "Identity for NRP specific packet forwarding of MPLS.";
  }

  identity nrp-dataplane-sr-mpls {
    base nrp-dataplane-type;
    description
      "Identity for NRP specific packet forwarding of SR MPLS.";
  }

  identity nrp-dataplane-srv6 {
    base nrp-dataplane-type;
    description
      "Identity for NRP specific packet forwarding of SRv6.";
  }

  /*
   * T Y P E D E F S



                        Expires 11 September 2023              [Page 11]

Internet-Draft                  NRP YANG                      March 2023


   */

  typedef nrp-acl-ref {
    type leafref {
      path "/acl:acls/acl:acl/acl:name";
    }
    description
      "This type is used to reference an ACL.";
  }

  typedef nrp-topo-filter-ref {
    type leafref {
      path "/nw:networks/topo-filt:topology-filters/"
         + "topo-filt:topology-filter/topo-filt:name";
    }
    description
      "This type is used to reference a Topology Filter.";
  }

  /*
   * Grouping - NRP Resource Reservation
   */

  grouping nrp-resource-reservation {
    description
      "Grouping for NRP resource reservation.";
    container resource-reservation {
      description
        "Container for NRP resource reservation.";
      leaf preference {
        type uint16;
        description
          "A higher preference indicates a more favorable resource
           reservation than a lower preference.";
      }
      choice max-bw-type {
        description
          "Choice of maximum bandwidth specification.";
        case bw-value {
          leaf maximum-bandwidth {
            type uint64;
            description
              "The maximum bandwidth allocated to an NRP
               - specified as absolute value.";
          }
        }
        case bw-percentage {
          leaf maximum-bandwidth-percent {



                        Expires 11 September 2023              [Page 12]

Internet-Draft                  NRP YANG                      March 2023


            type rt-types:percentage;
            description
              "The maximum bandwidth allocated to an NRP
               - specified as percentage of link
               capacity.";
          }
        }
      }
    }
  }

  /*
   * Grouping - NRP Selector
   */

  grouping nrp-selector {
    description
      "Grouping for NRP Selector.";
    container nrp-selector {
      description
        "Container for NRP selector.";
      choice nrp-selector-type {
        description
          "Container for NRP Selector.";
        case ipv4-nrp-aware {
          description
            "Container for IPv4 selector.";
          leaf-list nrp-aware-destination-prefix {
            type inet:ipv4-prefix;
            description
              "Any prefix from the specified set of IPv4
               destination prefixes can be the selector.";
          }
        }
        case ipv6 {
          description
            "Container for IPv6 selector.";
          choice ipv6-selector-type {
            description
              "Choices for IPv6 selector type.";
            case global-selector {
              leaf ipv6-hbh-eh {
                type uint32;
                description
                  "The selector value carried in Hop-by-Hop
                   Option of IPv6 extension header.";
              }
            }



                        Expires 11 September 2023              [Page 13]

Internet-Draft                  NRP YANG                      March 2023


            case nrp-aware {
              leaf-list destination-prefix {
                type inet:ipv6-prefix;
                description
                  "Any prefix from the specified set of IPv6
                   destination prefixes can be the selector.";
              }
              leaf-list srv6-sid {
                type inet:ipv6-prefix;
                description
                  "Any prefix from the specified set of SRv6
                   SID can be the selector.";
              }
            }
          }
        }
        /* mpls needs more work, the reference drafts to be add */
        case mpls {
          description
            "Container for MPLS as a selector.";
          choice mpls-selector-type {
            description
              "Choices for MPLS as a selector.";
            case global-selector {
              /*
                      choice specification-type {
                        description
                          "Choices for MPLS label specification.";

                        case derived {
                          leaf forwarding-label {
                            type empty;
                            description
                              "MPLS selector Label is derived from
                               forwarding label.";
                          }
                        }

                        case explicit {
                          leaf label {
                            type rt-types:mpls-label;
                            description
                              "MPLS selector Label is explicitly
                               specified.";
                          }
                          uses mpls-label-location;
                        }




                        Expires 11 September 2023              [Page 14]

Internet-Draft                  NRP YANG                      March 2023


                      }
               */
            }
            case nrp-aware {
              /*
                      list label-range {
                        key "index";
                        unique "start-label end-label";
                        description
                          "Any label from the specified set of MPLS label
                           ranges can be used as the selector.";
                        leaf index {
                          type string;
                          description
                            "A string that uniquely identifies a label
                             range.";
                        }
                        leaf start-label {
                          type rt-types:mpls-label;
                          must '. <= ../end-label' {
                            error-message
                              "The start-label must be less than or equal "
                            + "to end-label";
                          }
                          description
                            "Label-range start.";
                        }
                        leaf end-label {
                          type rt-types:mpls-label;
                          must '. >= ../start-label' {
                            error-message
                              "The end-label must be greater than or equal "
                            + "to start-label";
                          }
                          description
                            "Label-range end.";
                        }
                        uses mpls-label-location;

                      }
               */
            }
          }
        }
      }
      leaf-list acl-ref {
        type nrp-acl-ref;
        description



                        Expires 11 September 2023              [Page 15]

Internet-Draft                  NRP YANG                      March 2023


          "Selection is done based on the specified list of ACLs.";
      }
    }
  }

  /*
   * Grouping - NRP QoS PHB profile
   */

  grouping nrp-qos-phb-profile {
    description
      "Grouping for NRP QoS PHB profile.";
    leaf qos-phb-profile-name {
      type string;
      description
        "PHB profile identifier.";
    }
  }

  /*
   * Grouping - NRP IGP congruent
   */

  grouping nrp-igp-congruent {
    description
      "Grouping for NRP IGP congruent attributes.";
    container nrp-igp-congruent {
      presence "indicates NRP IGP congruent";
      description
        "The presence of the container node indicates NRP IGP
         congruent.";
      leaf multi-topology-id {
        type uint32;
        description
          "Indicates the MT-id of the NRP IGP instance.";
      }
      leaf algo-id {
        type uint32;
        description
          "Indicates the algo-id of the NRP IGP instance.";
      }
      leaf sharing {
        type boolean;
        default "true";
        description
          "'true' if the the NRP IGP instance can be shared with
           other NRPs;
           'false' if the the NRP IGP instance is dedicated



                        Expires 11 September 2023              [Page 16]

Internet-Draft                  NRP YANG                      March 2023


           to this NRP.";
      }
    }
  }

  /*
   * Grouping - NRP Topology Filter
   */

  grouping nrp-topology-filter {
    description
      "Grouping for NRP filter topology.";
    container filters {
      description
        "Container for filters.";
      list filter {
        key "filter-ref";
        description
          "List of filters.";
        leaf filter-ref {
          type nrp-topo-filter-ref;
          description
            "Reference to a specific topology filter from the
             list of global topology filters.";
        }
        uses nrp-resource-reservation;
        uses nrp-selector;
        uses nrp-qos-phb-profile;
      }
    }
  }

  /*
   * Grouping - NRP Select Topology
   */

  grouping nrp-select-topology {
    description
      "NRP topology specified by selection.";
    container nrp-select-topology {
      description
        "The container of NRP select topology.";
      list nrp-topology-group {
        key "group-id";
        description
          "List of groups for NRP topology elements (node or links)
           that share common attributes.";
        leaf group-id {



                        Expires 11 September 2023              [Page 17]

Internet-Draft                  NRP YANG                      March 2023


          type string;
          description
            "The NRP topology group identifier.";
        }
        container base-topology-ref {
          description
            "Container for the base topology reference.";
          uses nw:network-ref;
        }
        list links {
          key "link-ref";
          description
            "A list of links with common attributes";
          leaf link-ref {
            type leafref {
              path
                "/nw:networks/nw:network[nw:network-id=current()"
              + "/../../base-topology-ref/network-ref]"
              + "/nt:link/nt:link-id";
            }
            description
              "A reference to a link in the base topology.";
          }
        }
        uses nrp-resource-reservation;
        leaf link-partition-type {
          type identityref {
            base nrp-link-partition-type;
          }
          description
            "Indicates the resource reservation type of an NRP link.";
        }
      }
    }
  }

  /*
   * Grouping - NRP Topology
   */

  grouping nrp-topology {
    description
      "Grouping for NRP topology.";
    container nrp-topology {
      description
        "Container for NRP topology.";
      uses nrp-igp-congruent;
      choice topology-type {



                        Expires 11 September 2023              [Page 18]

Internet-Draft                  NRP YANG                      March 2023


        description
          "Choice of NRP topology type.";
        case selection {
          uses nrp-select-topology;
        }
        case filter {
          uses nrp-topology-filter;
        }
      }
    }
  }

  /*
   * Grouping - NRP Policy
   */

  grouping nrp-pol {
    description
      "Grouping for NRP policies.";
    container nrp-policies {
      description
        "Container for nrp policies.";
      list nrp-policy {
        key "name";
        unique "nrp-id";
        description
          "List of NRP policies.";
        leaf name {
          type string;
          description
            "A string that uniquely identifies the NRP policy.";
        }
        leaf nrp-id {
          type uint32;
          description
            "A 32-bit ID that uniquely identifies the NRP
             created by the enforcement of this NRP policy.";
        }
        leaf mode {
          type identityref {
            base nrp-partition-mode;
          }
          default "nrp-hybrid-plane-partition";
          description
            "Indicates the resource partition mode of the NRP, such as
             control plane partition, data plane partition,
             or hybrid partition.";
        }



                        Expires 11 September 2023              [Page 19]

Internet-Draft                  NRP YANG                      March 2023


        uses nrp-resource-reservation;
        uses nrp-selector;
        uses nrp-qos-phb-profile;
        uses nrp-topology;
      }
    }
  }

  /*
   * Grouping - NRP aware node attributes
   */

  grouping nrp-aware-id {
    description
      "The grouping of NRP aware dataplane ID.";
    container nrp-aware-dp-id {
      config false;
      description
        "The container of NRP data plane identifier.";
      leaf nrp-dp-srv6 {
        type srv6-types:srv6-sid;
        description
          "Indicates the SRv6 SID value as the NRP data plane
           identifier.";
      }
      leaf nrp-dp-sr-mpls {
        type rt-types:mpls-label;
        description
          "Indicates the SR MPLS ID value as the NRP data plane
           identifier.";
      }
    }
  }

  /*
   * Grouping - NRP Node Attributes
   */

  grouping nrp-node-attributes {
    description
      "NRP node scope attributes.";
    container nrp {
      config false;
      description
        "Containing NRP attributes.";
      uses nrp-aware-id;
    }
  }



                        Expires 11 September 2023              [Page 20]

Internet-Draft                  NRP YANG                      March 2023


  /*
   * Grouping - NRP Link Attributes
   */

  grouping nrp-link-states {
    description
      "NRP link scope states.";
    leaf link-partition-type {
      type identityref {
        base nrp-link-partition-type;
      }
      config false;
      description
        "Indicates the resource partition type of an NRP link.";
    }
    leaf bandwidth-value {
      type uint64;
      units "bps";
      config false;
      description
        "Bandwidth allocation for the NRP as absolute value.";
    }
    uses nrp-aware-id;
  }

  /*
   * Grouping - NRP Bandwidth Metrics
   */

  grouping nrp-bandwidth-metrics {
    description
      "Grouping for NRP bandwidth metrics.";
    leaf one-way-available-bandwidth {
      type rt-types:bandwidth-ieee-float32;
      units "bytes per second";
      default "0x0p0";
      description
        "Available bandwidth that is defined to be NRP link
         bandwidth minus bandwidth utilization. For a
         bundled link, available bandwidth is defined to be the
         sum of the component link available bandwidths.";
    }
    leaf one-way-utilized-bandwidth {
      type rt-types:bandwidth-ieee-float32;
      units "bytes per second";
      default "0x0p0";
      description
        "Bandwidth utilization that represents the actual



                        Expires 11 September 2023              [Page 21]

Internet-Draft                  NRP YANG                      March 2023


         utilization of the link (i.e. as measured in the router).
         For a bundled link, bandwidth utilization is defined to
         be the sum of the component link bandwidth
         utilizations.";
    }
  }

  // nrp-link-statistics

  grouping nrp-statistics-per-link {
    description
      "Statistics attributes per NRP link.";
    container statistics {
      config false;
      description
        "Statistics for NRP link.";
      leaf admin-status {
        type te-types:te-admin-status;
        description
          "The administrative state of the link.";
      }
      leaf oper-status {
        type te-types:te-oper-status;
        description
          "The current operational state of the link.";
      }
      uses nrp-bandwidth-metrics;
      uses te-packet-types:one-way-performance-metrics-packet;
    }
  }

  grouping nrp-topology-type {
    description
      "Identifies the topology type to be NRP";
    container nrp {
      presence "indicates NRP topology";
      description
        "The presence of the container node indicates NRP
         topology";
    }
  }

  /*
   * Augment - Network Resource Partition Policies.
   */

  augment "/nw:networks" {
    description



                        Expires 11 September 2023              [Page 22]

Internet-Draft                  NRP YANG                      March 2023


      "Augment networks with network resource partition
       policies.";
    uses nrp-pol;
  }

  /*
   * Augment - NRP type.
   */

  augment "/nw:networks/nw:network/nw:network-types" {
    description
      "Introduces new network type for NRP topology";
    uses nrp-topology-type;
  }

  /*
   * Augment - NRP node operational status.
   */

  augment "/nw:networks/nw:network/nw:node" {
    when '../nw:network-types/nrp:nrp' {
      description
        "Augment only for NRP topology.";
    }
    description
      "Augment node configuration and state.";
    uses nrp-node-attributes;
  }

  /*
   * Augment - NRP link operational status.
   */

  augment "/nw:networks/nw:network/nt:link" {
    when '../nw:network-types/nrp:nrp' {
      description
        "Augment only for NRP topology.";
    }
    description
      "Augment link configuration and state.";
    container nrp {
      config false;
      description
        "Containing NRP attributes.";
      uses nrp-link-states;
      uses nrp-statistics-per-link;
    }
  }



                        Expires 11 September 2023              [Page 23]

Internet-Draft                  NRP YANG                      March 2023


  /*
   * Augment - Native topology with node operational status.
   */

  augment "/nw:networks/nw:network/nw:node" {
    description
      "Augment node with NRP aware attributes.";
    list nrps {
      key "nrp-id";
      config false;
      description
        "List of NRPs.";
      leaf nrp-id {
        type uint32;
        description
          "NRP identifier";
      }
      uses nrp-node-attributes;
    }
  }

  /*
   * Augment - Native topology with link operational status.
   */

  augment "/nw:networks/nw:network/nt:link" {
    description
      "Augment link with NRP aware attributes.";
    list nrps {
      key "nrp-id";
      config false;
      description
        "List of NRPs.";
      leaf nrp-id {
        type uint32;
        description
          "NRP identifier";
      }
      uses nrp-link-states;
    }
  }
}









                        Expires 11 September 2023              [Page 24]

Internet-Draft                  NRP YANG                      March 2023


5.  Security Considerations

   The YANG model defined in this document is designed to be accessed
   via network management protocols such as NETCONF [RFC6241] or
   RESTCONF [RFC8040].  The lowest NETCONF layer is the secure transport
   layer, and the mandatory-to-implement secure transport is Secure
   Shell (SSH) [RFC6242].  The lowest RESTCONF layer is HTTPS, and the
   mandatory-to-implement secure transport is TLS [RFC8446].

   The NETCONF access control model [RFC8341] provides the means to
   restrict access for particular NETCONF or RESTCONF users to a
   preconfigured subset of all available NETCONF or RESTCONF protocol
   operations and content.

   There are a number of data nodes defined in this YANG model that are
   writable/creatable/deletable (i.e., config true, which is the
   default).  These data nodes may be considered sensitive or vulnerable
   in some network environments.  Write operations (e.g., edit-config)
   to these data nodes without proper protection can have a negative
   effect on network operations.

   nrp-link: A malicious client could attempt to remove a link from a
   topology, add a new link.  In each case, the structure of the
   topology would be sabotaged, and this scenario could, for example,
   result in an NRP topology that is less than optimal.

   The entries in the nodes above include the whole network
   configurations corresponding with the NRP, and indirectly create or
   modify the PE or P device configurations.  Unexpected changes to
   these entries could lead to service disruption and/or network
   misbehavior.

6.  IANA Considerations

   This document registers a URI in the IETF XML registry [RFC3688].
   Following the format in [RFC3688], the following registration is
   requested to be made:

      URI: urn:ietf:params:xml:ns:yang:ietf-nrp
      Registrant Contact: The IESG.
      XML: N/A, the requested URI is an XML namespace.

   This document requests to register a YANG module in the YANG Module
   Names registry [RFC7950].







                        Expires 11 September 2023              [Page 25]

Internet-Draft                  NRP YANG                      March 2023


              Name: ietf-nrp
              Namespace: urn:ietf:params:xml:ns:yang:ietf-nrp
              Maintained by IANA: N
              Prefix: nrp
              Reference: RFC XXXX

7.  References

7.1.  Normative References

   [RFC3688]  Mealling, M., "The IETF XML Registry", BCP 81, RFC 3688,
              DOI 10.17487/RFC3688, January 2004,
              <https://www.rfc-editor.org/info/rfc3688>.

   [RFC4915]  Psenak, P., Mirtorabi, S., Roy, A., Nguyen, L., and P.
              Pillay-Esnault, "Multi-Topology (MT) Routing in OSPF",
              RFC 4915, DOI 10.17487/RFC4915, June 2007,
              <https://www.rfc-editor.org/info/rfc4915>.

   [RFC5120]  Przygienda, T., Shen, N., and N. Sheth, "M-ISIS: Multi
              Topology (MT) Routing in Intermediate System to
              Intermediate Systems (IS-ISs)", RFC 5120,
              DOI 10.17487/RFC5120, February 2008,
              <https://www.rfc-editor.org/info/rfc5120>.

   [RFC6241]  Enns, R., Ed., Bjorklund, M., Ed., Schoenwaelder, J., Ed.,
              and A. Bierman, Ed., "Network Configuration Protocol
              (NETCONF)", RFC 6241, DOI 10.17487/RFC6241, June 2011,
              <https://www.rfc-editor.org/info/rfc6241>.

   [RFC6242]  Wasserman, M., "Using the NETCONF Protocol over Secure
              Shell (SSH)", RFC 6242, DOI 10.17487/RFC6242, June 2011,
              <https://www.rfc-editor.org/info/rfc6242>.

   [RFC7950]  Bjorklund, M., Ed., "The YANG 1.1 Data Modeling Language",
              RFC 7950, DOI 10.17487/RFC7950, August 2016,
              <https://www.rfc-editor.org/info/rfc7950>.

   [RFC7951]  Lhotka, L., "JSON Encoding of Data Modeled with YANG",
              RFC 7951, DOI 10.17487/RFC7951, August 2016,
              <https://www.rfc-editor.org/info/rfc7951>.

   [RFC8040]  Bierman, A., Bjorklund, M., and K. Watsen, "RESTCONF
              Protocol", RFC 8040, DOI 10.17487/RFC8040, January 2017,
              <https://www.rfc-editor.org/info/rfc8040>.






                        Expires 11 September 2023              [Page 26]

Internet-Draft                  NRP YANG                      March 2023


   [RFC8340]  Bjorklund, M. and L. Berger, Ed., "YANG Tree Diagrams",
              BCP 215, RFC 8340, DOI 10.17487/RFC8340, March 2018,
              <https://www.rfc-editor.org/info/rfc8340>.

   [RFC8341]  Bierman, A. and M. Bjorklund, "Network Configuration
              Access Control Model", STD 91, RFC 8341,
              DOI 10.17487/RFC8341, March 2018,
              <https://www.rfc-editor.org/info/rfc8341>.

   [RFC8345]  Clemm, A., Medved, J., Varga, R., Bahadur, N.,
              Ananthakrishnan, H., and X. Liu, "A YANG Data Model for
              Network Topologies", RFC 8345, DOI 10.17487/RFC8345, March
              2018, <https://www.rfc-editor.org/info/rfc8345>.

   [RFC8446]  Rescorla, E., "The Transport Layer Security (TLS) Protocol
              Version 1.3", RFC 8446, DOI 10.17487/RFC8446, August 2018,
              <https://www.rfc-editor.org/info/rfc8446>.

7.2.  Informative References

   [I-D.ietf-lsr-flex-algo]
              Psenak, P., Hegde, S., Filsfils, C., Talaulikar, K., and
              A. Gulko, "IGP Flexible Algorithm", Work in Progress,
              Internet-Draft, draft-ietf-lsr-flex-algo-26, 17 October
              2022, <https://datatracker.ietf.org/doc/html/draft-ietf-
              lsr-flex-algo-26>.

   [I-D.ietf-lsr-isis-sr-vtn-mt]
              Xie, C., Ma, C., Dong, J., and Z. Li, "Using IS-IS Multi-
              Topology (MT) for Segment Routing based Virtual Transport
              Network", Work in Progress, Internet-Draft, draft-ietf-
              lsr-isis-sr-vtn-mt-03, 10 July 2022,
              <https://datatracker.ietf.org/doc/html/draft-ietf-lsr-
              isis-sr-vtn-mt-03>.

   [I-D.ietf-opsawg-sap]
              Boucadair, M., de Dios, O. G., Barguil, S., Wu, Q., and V.
              Lopez, "A YANG Network Model for Service Attachment Points
              (SAPs)", Work in Progress, Internet-Draft, draft-ietf-
              opsawg-sap-15, 18 January 2023,
              <https://datatracker.ietf.org/doc/html/draft-ietf-opsawg-
              sap-15>.









                        Expires 11 September 2023              [Page 27]

Internet-Draft                  NRP YANG                      March 2023


   [I-D.ietf-teas-ietf-network-slices]
              Farrel, A., Drake, J., Rokui, R., Homma, S., Makhijani,
              K., Contreras, L. M., and J. Tantsura, "A Framework for
              IETF Network Slices", Work in Progress, Internet-Draft,
              draft-ietf-teas-ietf-network-slices-19, 21 January 2023,
              <https://datatracker.ietf.org/doc/html/draft-ietf-teas-
              ietf-network-slices-19>.

   [I-D.ietf-teas-ns-ip-mpls]
              Saad, T., Beeram, V. P., Dong, J., Wen, B., Ceccarelli,
              D., Halpern, J. M., Peng, S., Chen, R., Liu, X.,
              Contreras, L. M., Rokui, R., and L. Jalil, "Realizing
              Network Slices in IP/MPLS Networks", Work in Progress,
              Internet-Draft, draft-ietf-teas-ns-ip-mpls-01, 24 October
              2022, <https://datatracker.ietf.org/doc/html/draft-ietf-
              teas-ns-ip-mpls-01>.

   [RFC8309]  Wu, Q., Liu, W., and A. Farrel, "Service Models
              Explained", RFC 8309, DOI 10.17487/RFC8309, January 2018,
              <https://www.rfc-editor.org/info/rfc8309>.

   [RFC9182]  Barguil, S., Gonzalez de Dios, O., Ed., Boucadair, M.,
              Ed., Munoz, L., and A. Aguado, "A YANG Network Data Model
              for Layer 3 VPNs", RFC 9182, DOI 10.17487/RFC9182,
              February 2022, <https://www.rfc-editor.org/info/rfc9182>.

   [RFC9291]  Boucadair, M., Ed., Gonzalez de Dios, O., Ed., Barguil,
              S., and L. Munoz, "A YANG Network Data Model for Layer 2
              VPNs", RFC 9291, DOI 10.17487/RFC9291, September 2022,
              <https://www.rfc-editor.org/info/rfc9291>.

Appendix A.  An Example

   This section contains an example of an instance data tree in JSON
   encoding [RFC7951].  The example instantiates ietf-nrp for the
   topology that is depicted in the following diagram.  There are three
   nodes, D1, D2, and D3.  D1 has three termination points, 1-0-1,
   1-2-1, and 1-3-1.  D2 has three termination points as well, 2-1-1,
   2-0-1, and 2-3-1.  D3 has two termination points, 3-1-1 and 3-2-1.
   In addition there are six links, two between each pair of nodes with
   one going in each direction.










                        Expires 11 September 2023              [Page 28]

Internet-Draft                  NRP YANG                      March 2023


                +------------+                   +------------+
                |     D1     |                   |     D2     |
               /-\          /-\                 /-\          /-\
               | | 1-0-1    | |---------------->| | 2-1-1    | |
               | |    1-2-1 | |<----------------| |    2-0-1 | |
               \-/  1-3-1   \-/                 \-/  2-3-1   \-/
                |   /----\   |                   |   /----\   |
                +---|    |---+                   +---|    |---+
                    \----/                           \----/
                     |  |                             |  |
                     |  |                             |  |
                     |  |                             |  |
                     |  |       +------------+        |  |
                     |  |       |     D3     |        |  |
                     |  |      /-\          /-\       |  |
                     |  +----->| | 3-1-1    | |-------+  |
                     +---------| |    3-2-1 | |<---------+
                               \-/          \-/
                                |            |
                                +------------+

                     Figure 1: An NRP Instance Example

   The corresponding NRP instance data tree is depicted below:

   (Artwork only available as : No external link available, see draft-
   xx-teas-nrp-yang-00.html for artwork.)

                        Figure 2: Instance data tree

Appendix B.  NRP YANG Module Tree


module: ietf-nrp
  augment /nw:networks:
    +--rw nrp-policies
       +--rw nrp-policy* [name]
          +--rw name                    string
          +--rw nrp-id?                 uint32
          +--rw partition-mode?         identityref
          +--rw resource-reservation
          |  +--rw preference?                        uint16
          |  +--rw (max-bw-type)?
          |     +--:(bw-value)
          |     |  +--rw maximum-bandwidth?           uint64
          |     +--:(bw-percentage)
          |        +--rw maximum-bandwidth-percent?   rt-types:percentage
          +--rw nrp-selector



                        Expires 11 September 2023              [Page 29]

Internet-Draft                  NRP YANG                      March 2023


          |  +--rw (nrp-selector-type)?
          |  |  +--:(ipv4-nrp-aware)
          |  |  |  +--rw nrp-aware-destination-prefix*   inet:ipv4-prefix
          |  |  +--:(ipv6)
          |  |  |  +--rw (ipv6-selector-type)?
          |  |  |     +--:(global-selector)
          |  |  |     |  +--rw ipv6-hbh-eh?              uint32
          |  |  |     +--:(nrp-aware)
          |  |  |        +--rw destination-prefix*       inet:ipv6-prefix
          |  |  |        +--rw srv6-sid*                 inet:ipv6-prefix
          |  |  +--:(mpls)
          |  |     +--rw (mpls-selector-type)?
          |  |        +--:(global-selector)
          |  |        +--:(nrp-aware)
          |  +--rw acl-ref*                              nrp-acl-ref
          +--rw qos-phb-profile-name?   string
          +--rw nrp-topology
             +--rw nrp-igp-congruent!
             |  +--rw multi-topology-id?   uint32
             |  +--rw algo-id?             uint32
             |  +--rw sharing?             boolean
             +--rw (topology-type)?
                +--:(selection)
                |  +--rw nrp-select-topology
                |     +--rw nrp-topology-group* [group-id]
                |        +--rw group-id                string
                |        +--rw base-topology-ref
                |        |  +--rw network-ref?   -> /nw:networks/network/network-id
                |        +--rw links* [link-ref]
                |        |  +--rw link-ref    -> /nw:networks/network[nw:network-id=current()/../../base-topology-ref/network-ref]/nt:link/link-id
                |        +--rw resource-reservation
                |        |  +--rw preference?                        uint16
                |        |  +--rw (max-bw-type)?
                |        |     +--:(bw-value)
                |        |     |  +--rw maximum-bandwidth?           uint64
                |        |     +--:(bw-percentage)
                |        |        +--rw maximum-bandwidth-percent?   rt-types:percentage
                |        +--rw link-partition-type?    identityref
                +--:(filter)
                   +--rw filters
                      +--rw filter* [filter-ref]
                         +--rw filter-ref              nrp-topo-filter-ref
                         +--rw resource-reservation
                         |  +--rw preference?                        uint16
                         |  +--rw (max-bw-type)?
                         |     +--:(bw-value)
                         |     |  +--rw maximum-bandwidth?           uint64
                         |     +--:(bw-percentage)



                        Expires 11 September 2023              [Page 30]

Internet-Draft                  NRP YANG                      March 2023


                         |        +--rw maximum-bandwidth-percent?   rt-types:percentage
                         +--rw nrp-selector
                         |  +--rw (nrp-selector-type)?
                         |  |  +--:(ipv4-nrp-aware)
                         |  |  |  +--rw nrp-aware-destination-prefix*   inet:ipv4-prefix
                         |  |  +--:(ipv6)
                         |  |  |  +--rw (ipv6-selector-type)?
                         |  |  |     +--:(global-selector)
                         |  |  |     |  +--rw ipv6-hbh-eh?              uint32
                         |  |  |     +--:(nrp-aware)
                         |  |  |        +--rw destination-prefix*       inet:ipv6-prefix
                         |  |  |        +--rw srv6-sid*                 inet:ipv6-prefix
                         |  |  +--:(mpls)
                         |  |     +--rw (mpls-selector-type)?
                         |  |        +--:(global-selector)
                         |  |        +--:(nrp-aware)
                         |  +--rw acl-ref*                              nrp-acl-ref
                         +--rw qos-phb-profile-name?   string
  augment /nw:networks/nw:network/nw:network-types:
    +--rw nrp!
  augment /nw:networks/nw:network/nw:node:
    +--ro nrp
       +--ro nrp-aware-dp-id
          +--ro nrp-dp-srv6?      srv6-types:srv6-sid
          +--ro nrp-dp-sr-mpls?   rt-types:mpls-label
  augment /nw:networks/nw:network/nt:link:
    +--ro nrp
       +--ro link-partition-type?   identityref
       +--ro bandwidth-value?       uint64
       +--ro nrp-aware-dp-id
       |  +--ro nrp-dp-srv6?      srv6-types:srv6-sid
       |  +--ro nrp-dp-sr-mpls?   rt-types:mpls-label
       +--ro statistics
          +--ro admin-status?                  te-types:te-admin-status
          +--ro oper-status?                   te-types:te-oper-status
          +--ro one-way-available-bandwidth?   rt-types:bandwidth-ieee-float32
          +--ro one-way-utilized-bandwidth?    rt-types:bandwidth-ieee-float32
          +--ro one-way-min-delay?             uint32
          +--ro one-way-max-delay?             uint32
          +--ro one-way-delay-variation?       uint32
          +--ro one-way-packet-loss?           decimal64
  augment /nw:networks/nw:network/nw:node:
    +--ro nrps* [nrp-id]
       +--ro nrp-id    uint32
       +--ro nrp
          +--ro nrp-aware-dp-id
             +--ro nrp-dp-srv6?      srv6-types:srv6-sid
             +--ro nrp-dp-sr-mpls?   rt-types:mpls-label



                        Expires 11 September 2023              [Page 31]

Internet-Draft                  NRP YANG                      March 2023


  augment /nw:networks/nw:network/nt:link:
    +--ro nrps* [nrp-id]
       +--ro nrp-id                 uint32
       +--ro link-partition-type?   identityref
       +--ro bandwidth-value?       uint64
       +--ro nrp-aware-dp-id
          +--ro nrp-dp-srv6?      srv6-types:srv6-sid
          +--ro nrp-dp-sr-mpls?   rt-types:mpls-label

Author's Address

   xxx







































                        Expires 11 September 2023              [Page 32]
